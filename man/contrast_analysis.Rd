% Generated by roxygen2: do not edit by hand
\name{contrast_analysis}
\alias{contrast_analysis}
\title{Contrast Analysis with Equivalence Testing}
\usage{
contrast_analysis(
  data,
  dv,
  conditions,
  hypothesis,
  design = "between",
  id = NULL,
  delta = 0.3,
  delta_type = "dz",
  d_interest_min = NULL,
  alpha = 0.05,
  confirm = FALSE,
  bonferroni = TRUE,
  graph1 = TRUE,
  graph1.only = FALSE,
  graph2 = FALSE,
  graph2.only = FALSE
)
}
\arguments{
\item{data}{A data frame.}

\item{dv}{Name of the dependent variable column (string). Set \code{NULL}
for within-subjects designs (wide format).}

\item{conditions}{Name of the grouping variable column (string). Set
\code{NULL} for within-subjects designs.}

\item{hypothesis}{A named numeric vector specifying the predicted
pattern. Names must match the levels of \code{conditions} (between) or
column names (within). Values encode the predicted relative ordering
(e.g., \code{c(Control = 0, Low = 1, High = 2)}). Only the relative
spacing matters; the vector is centered and normalized internally.}

\item{design}{Either \code{"between"} (default) or \code{"within"}.}

\item{id}{Name of the participant ID column (string). Required for
within-subjects designs.}

\item{delta}{Equivalence bound(s) for residual contrasts. A scalar
(applied to all residuals) or a vector of length \emph{k} - 2 (one per
residual). Units depend on \code{delta_type}: \code{"dz"} uses
standardized \emph{d} units; \code{"share_signal"} uses percentage of
model variance (between 0 and 100, exclusive).}

\item{delta_type}{Either \code{"dz"} (default) or \code{"share_signal"}.}

\item{d_interest_min}{A single positive number: the smallest meaningful
standardized effect (SESOI) for the contrast of interest. Required
when \code{delta_type = "share_signal"}. Ignored when
\code{delta_type = "dz"}.}

\item{alpha}{Significance level (default 0.05).}

\item{confirm}{If \code{TRUE}, display the setup and pause for
confirmation before running.}

\item{bonferroni}{If \code{TRUE} (default) and contrasts are
non-orthogonal, apply Bonferroni correction to TOST alpha.}

\item{graph1}{If \code{TRUE} (default), display the forest plot.}

\item{graph1.only}{If \code{TRUE}, return only the forest plot as a
ggplot object.}

\item{graph2}{If \code{TRUE}, display the variance decomposition plot.}

\item{graph2.only}{If \code{TRUE}, return only the variance plot as a
ggplot object.}
}
\value{
If \code{graph1.only = TRUE}, a ggplot object (forest plot). If
\code{graph2.only = TRUE}, a ggplot object (variance plot). Otherwise,
prints a formatted summary and invisibly returns a list containing
all computed results (see Details in the R source or the tutorial).
}
\description{
Decomposes between-group variance into a theory-driven contrast of
interest and orthogonal residual contrasts, then tests whether the
predicted pattern is significant (NHST) and whether deviations from it
are negligibly small (TOST equivalence tests). Implements Pillaud (2025)
integrated with Campbell (2023) and the Intersection-Union Test (IUT;
Berger, 1982).
}
\details{
\strong{Effect Sizes:} Between-subjects uses \code{d = b / sigma};
within-subjects uses \code{d_z = M / SD} of contrast scores.

\strong{Share-signal mode:} When \code{delta_type = "share_signal"},
the function converts the percentage to a \emph{d}-scale bound using
\code{delta_d = d_interest_min * sqrt(p / (1 - p))} where
\code{p = delta / 100}.

\strong{Conclusions:} SUPPORTED (interest significant, all residuals
equivalent), PARTIALLY SUPPORTED (interest significant, some residuals
not equivalent), NOT SUPPORTED (interest not significant).
}
\examples{
set.seed(42)
dat <- data.frame(
  group = rep(c("A","B","C","D"), each = 50),
  score = c(rnorm(50,2,3), rnorm(50,4,3), rnorm(50,6,3), rnorm(50,8,3))
)
result <- contrast_analysis(
  dat, "score", "group",
  hypothesis = c(A=0, B=1, C=2, D=3),
  delta = 0.3
)
}
\references{
Berger, R. L. (1982). Multiparameter hypothesis testing and acceptance
  sampling. \emph{Technometrics}, \emph{24}(4), 295--300.

Campbell, H. (2023). Equivalence testing for contrast analysis.

Lakens, D. (2017). Equivalence tests: A practical primer for \emph{t}
  tests, correlations, and meta-analyses. \emph{Social Psychological and
  Personality Science}, \emph{8}(4), 355--362.

Pillaud, V. (2025). Testing specific hypotheses: A tutorial on contrast
  analyses using R.
}
